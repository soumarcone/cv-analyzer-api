# CV Analyzer API - Environment Variables Configuration
# Copy this file to .env and fill in the required values

# ==================== LLM Configuration (REQUIRED) ====================

# LLM provider to use
# Supported: openai
# Required: YES
LLM_PROVIDER=openai

# API key for the LLM provider
# For OpenAI: https://platform.openai.com/account/api-keys
# Required: YES
# Security: Never commit the actual key to version control
LLM_API_KEY=sk-your-api-key-here

# Model name to use
# For OpenAI: gpt-4o, gpt-4o-mini, gpt-4-turbo, etc.
# Required: YES
# Note: Different models have different costs and capabilities
LLM_MODEL=gpt-4o

# ==================== LLM Configuration (OPTIONAL) ====================

# Custom base URL for LLM API (if using proxy or custom endpoint)
# For OpenAI: leave unset to use official https://api.openai.com
# Required: NO
# Default: None (uses official endpoint)
# LLM_BASE_URL=https://api.openai.com

# Timeout in seconds for LLM API requests
# Required: NO
# Default: 45.0
# LLM_TIMEOUT_SECONDS=45.0

# ==================== Application Configuration ====================

# Debug mode (enables verbose logging and error details)
# Supported: true, false
# Required: NO
# Default: false
DEBUG=false

# Maximum upload file size in MB
# Required: NO
# Default: 10
MAX_UPLOAD_SIZE_MB=10

# Maximum CV text length in characters
# Required: NO
# Default: 50000
MAX_CV_CHARS=50000

# Maximum job description text length in characters
# Required: NO
# Default: 10000
MAX_JOB_DESC_CHARS=10000

# ==================== API Security Configuration ====================

# Whether API key authentication is required for endpoints
# Supported: true, false
# Required: NO
# Default: true
# Note: Set to false for local development/testing only
API_KEY_REQUIRED=true

# Comma-separated list of valid API keys
# Required: YES (if API_KEY_REQUIRED=true)
# Security: Use strong, random keys (e.g., generated with `openssl rand -hex 32`)
# Note: Never commit real API keys to version control
# Example: API_KEYS=sk_live_abc123,sk_live_def456
API_KEYS=your-secret-api-key-here,another-api-key-here

# ==================== Rate Limiting (MVP) ====================

# Enable global rate limiting per API key.
# Supported: true, false
# Required: NO
# Default: true
APP_RATE_LIMIT_ENABLED=true

# Maximum requests per window per API key.
# Required: NO
# Default: 10
APP_RATE_LIMIT_REQUESTS=10

# Window size in seconds.
# Required: NO
# Default: 60
APP_RATE_LIMIT_WINDOW_SECONDS=60

# Include rate limit headers when throttling.
# Required: NO
# Default: true
APP_RATE_LIMIT_INCLUDE_HEADERS=true

# ==================== Structured Logging Configuration ====================

# Logging level for the application.
# Supported: debug, info, warning, error
# Required: NO
# Default: info
LOG_LEVEL=info

# Log output format.
# Supported: json, plain
# Required: NO
# Default: json
# Note: JSON format is recommended for production (machine-readable)
LOG_FORMAT=json

# Where logs are sent.
# Supported: stdout, file
# Required: NO
# Default: stdout
# Note: stdout = console output (captured by Docker logs)
#       file = persisted to disk (configure LOG_FILE_PATH)
LOG_OUTPUT=stdout

# File path for logs when LOG_OUTPUT=file.
# Required: NO (required if LOG_OUTPUT=file)
# Default: logs/app.log
# Example: /var/log/cv-analyzer-api/app.log
# LOG_FILE_PATH=logs/app.log

# Maximum bytes per log file before rotation (when using file output).
# Required: NO
# Default: 10485760 (10 MB)
# LOG_MAX_BYTES=10485760

# Number of rotated log files to keep.
# Required: NO
# Default: 5
# LOG_BACKUP_COUNT=5

# Retention hint in days (for external log processors; not enforced locally).
# Required: NO
# Default: 7
# LOG_RETENTION_DAYS=7

# Header name used for request ID propagation.
# Required: NO
# Default: X-Request-ID
# Note: This header is automatically added to all responses
# REQUEST_ID_HEADER=X-Request-ID

# ==================== Security Notes ====================
# 
# IMPORTANT: The following are NEVER logged, even with LOG_LEVEL=debug:
# - API keys and secrets (LLM_API_KEY, API_KEYS, etc.)
# - CV and job description text (only hashes and metadata)
# - LLM prompts and responses (only call metadata)
# - Environment variable values
# - Personal identifiable information (PII)
#
# All logs are automatically redacted to remove sensitive data.
# Request IDs are included in every log for correlation and debugging.
